## sPringbOOt



### åˆ›å»ºé¡¹ç›® ( IDEA ä¸­çš„springbootæ’ä»¶)

1. file -> module -> spring initializr 
2. é€‰æ‹©jdk1.8 -> next 
3. ç»„ç»‡å, é¡¹ç›®å, typeé€‰maven project -> next
4. é€‰ä¸­web->web, å³ä¸Šè§’è®¾ç½®spring boot ç‰ˆæœ¬2.0 -> next
5. finish



> ç”Ÿæˆçš„é¡¹ç›®ä¸­çš„pox.xml ä¸­çš„
>
> parentæ ‡ç­¾: ä»£è¡¨è¯¥é¡¹ç›®ç»§æ‰¿äºspringbooté¡¹ç›®
>
> propertiesæ ‡ç­¾: å±æ€§é…ç½®
>
> buildæ ‡ç­¾: é…ç½®é¡¹ç›®æ’ä»¶



6. ç”Ÿæˆçš„é¡¹ç›®ä¸­ä¼šåœ¨src->javaçš„æœ€åº•çº§ç›®å½•ä¸­è‡ªåŠ¨ç”Ÿæˆç¨‹åºçš„å¯åŠ¨ç±»

   ```java
   //å¼€å¯springè‡ªåŠ¨é…ç½®
   @SpringBootApplication
   public class Application{
       
       public static void main(String[] args){
           //ä½¿ç”¨Applicationè¿™ä¸ªç±»å¯åŠ¨å†…ç½®çš„tomcatæœåŠ¡å™¨, è¿™é‡Œå°±æ˜¯æœ¬ç±»
           SpringApplication.run(Application.class, args);
       } 
   }
   ```

7. åœ¨javaæ–‡ä»¶å¤¹çš„æœ€åº•æ–‡ä»¶å¤¹ä¸­æ–°å»ºcontrolleræ–‡ä»¶å¤¹, ç”¨äºæ”¾æ§åˆ¶å™¨ç±»

8. åœ¨controlleræ–‡ä»¶å¤¹ä¸­æ–°å»ºHelloControllerç±» ( æ§åˆ¶å™¨ç±»èƒ½è¢«è‡ªåŠ¨åŠ è½½çš„åŸå› æ˜¯è·¯å¾„ä½äºç¨‹åºå…¥å£ç±»çš„ä¸‹çº§ )

   ```java
   @Controller
   public class HelloController{
       
       //æ³¨è§£åŒspringmvc
       //è®¿é—®è·¯å¾„
       @RequestMapping("hello")
       //è®¾ç½®è¿”å›æ–¹å¼ä¸ºjsonå­—ç¬¦ä¸²
       @ResponseBody
       public String hello(){
           return "hello";
       }
   }
   ```

9. è¿è¡Œç¨‹åºçš„mainæ–¹æ³•

10. è®¿é—®æœ¬åœ°8080ç«¯å£åŠ æ§åˆ¶å™¨è·¯å¾„, æ— éœ€åŠ é¡¹ç›®å, é»˜è®¤æ²¡æœ‰



> é¡¹ç›®ä¸­çš„å„å±‚ç±»åº”å½“ä½äºç¨‹åºä¸»ç±»çš„ä¸‹çº§æˆ–åŒçº§



### åˆ›å»ºé¡¹ç›® ( mavenåˆ›å»º )

1. file -> new module -> maven -> é€‰æ‹©jdk1.8 -> next -> è®¾ç½® add as module to å’Œparentéƒ½ä¸ºnone -> è¾“å…¥é¡¹ç›®åå’Œç»„ç»‡å -> next -> finish

2. åœ¨pomä¸­æ·»åŠ springbootä¸ºçˆ¶çº§ä¾èµ–

   ```xml
   <parent>
           <groupId>org.springframework.boot</groupId>
           <artifactId>spring-boot-starter-parent</artifactId>
           <version>2.2.5.RELEASE</version>
           <relativePath/> <!-- lookup parent from repository -->
   </parent>
   ```

   





### springbootæ ¸å¿ƒé…ç½®

* ä½¿ç”¨resourcesä¸‹çš„application.propertiesé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®  (  ä¹Ÿå¯ä½¿ç”¨.ymlæ–‡ä»¶é…ç½®  )

  ```properties
  #é…ç½®æœåŠ¡å¯åŠ¨ç«¯å£
  server.port=8080
  #é…ç½®æœåŠ¡å¯åŠ¨é¡¹ç›®å
  server.context-path=/02-springboot-web
  ```

  * ä½¿ç”¨ymlé…ç½®å¦‚ä¸Š  ( é…ç½®æ–‡ä»¶åå­—åº”å½“ä¸ºapplication.yml )

    ```yml
    server:
    	port: 9090
    	context-path: /02-springboot-web
    ```

* å¤šç¯å¢ƒé…ç½®æ–‡ä»¶  , ä½¿ç”¨å¤šä¸ªé…ç½®æ–‡ä»¶, æ ¹æ®ä¸»é…ç½®æ–‡ä»¶é€‰æ‹©ä½¿ç”¨å“ªä¸ª

  1. åœ¨resourcesä¸‹æœ‰å¤šä¸ªé…ç½®æ–‡ä»¶  `application.properties` , `application-dev.properties`  , `application-online.properties`  , `application-test.properties`

  2. å…¶ä¸­  `application.properties`  ä¸ºä¸»é…ç½®æ–‡ä»¶

  3. åœ¨  `application.properties`  ä¸­é…ç½®ä½¿ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶

     ```properties
     #å…¶ä»–é…ç½®æ–‡ä»¶å¿…é¡»ä½¿ç”¨ä¸Šè¿°å‘½åè§„åˆ™, æ­¤é¡¹è®¾ç½®å½“å‰ä½¿ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶, ä¸º'-'ä¹‹åçš„åç§°
     #æŒ‡å®šæ¿€æ´»é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ä¼šè¦†ç›–ä¸»é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®
     spring.profiles.active=dev
     ```

* ä½¿ç”¨è‡ªå®šä¹‰çš„é…ç½® ( å®é™…ä¸Šæ˜¯spingä¸­çš„è‡ªåŠ¨æ³¨å…¥ä¸­çš„å€¼ç»‘å®š@Value )

  1. åœ¨é…ç½®æ–‡ä»¶ä¸­å†™è‡ªå®šä¹‰çš„å±æ€§

     ```properties
     name=123
     ```

  2. åœ¨ç±»ä¸­ä½¿ç”¨@Valueæ¥è‡ªåŠ¨ç»‘å®šå€¼

     ```java
     @Controller
     class HelloCOntroller{
         @Value("${name}")
         public String name;
         
         @RequestMapping("obtainName")
         @ResponseBody
         public String obtainName(){
             return name;
         }
     }
     ```

  > å¦‚æœå‡ºç°ä¸­æ–‡ä¹±ç , åœ¨é¡¹ç›®è®¾ç½®ä¸­è®¾ç½®é…ç½®æ–‡ä»¶ç¼–ç æ ¼å¼ä¸ºutf-8  file->settings->editor->file encoding->project encodingå’Œdefault encoding for properties filesè®¾ç½®ä¸ºutf-8, é€‰ä¸­transparent native-to-ascii conversion -> apply -> ok

* ä½¿ç”¨æ˜ å°„é…ç½®æ–‡ä»¶ä¸­ç»Ÿä¸€å‰ç¼€çš„å±æ€§ä¸ºä¸€ä¸ªç±»çš„æ–¹æ³•æ¥ä½¿ç”¨è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶

  1. é…ç½®æ–‡ä»¶ä¸­è¦æ˜ å°„çš„å±æ€§ç»Ÿä¸€å‰ç¼€å‘½å

     ```properties
     #ç»Ÿä¸€å‘½åå‰ç¼€ä¸ºboot
     boot.name=123
     boot.location=bj
     ```

  2. åˆ›å»ºä¸€ä¸ªç±»æ¥æ˜ å°„ä¸€ä¸ªå‰ç¼€çš„å±æ€§

     ```java
     @Component
     //ä½¿ç”¨è¿™ä¸ªæ³¨è§£æ˜ å°„ç¬¦åˆå‰ç¼€çš„å±æ€§
     @ConfigurationProperties(prefix = "boot")
     class ConfigInfo{
         private String name;
         private String location;
         
         //å±æ€§çš„getå’Œsetæ–¹æ³•...
     }
     ```

  3. ä½¿ç”¨è¯¥ç±»çš„å®ä¾‹æ¥ä½¿ç”¨é…ç½®å±æ€§



### springbootä¸­çš„springmvc ( ä¸springmvcå®Œå…¨ç›¸åŒ )

* @Controller
* @RestController
  * åœ¨ç±»ä¸Šä½¿ç”¨, ç›¸å½“äºåŒæ—¶ä½¿ç”¨äº†@Controllerå’Œ@ResponseBody
  * ä½¿ç”¨äº†è¿™ä¸ªæ³¨è§£çš„ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè¿”å›json
* @GetMapping
  * ç­‰åŒäºè®¾ç½®äº†getè¯·æ±‚æ–¹å¼çš„@RequestMapping
* @PostMapping
  * ç­‰åŒäºè®¾ç½®äº†postè¯·æ±‚æ–¹å¼çš„@RequestMapping



### springbootä½¿ç”¨jspè¿”å›  ( é…ç½®springmvcçš„è§†å›¾è§£æå™¨ )

1. åœ¨pomä¸­åŠ å…¥jspçš„ä¾èµ–åŒ…

   * tomcat-embed-jasper
   * javax.servlet-api
   * javax.servlet.jsp-api ( çˆ¶çº§é¡¹ç›®ä¸­æ²¡æœ‰, è¦åŠ ç‰ˆæœ¬å· 2.3.1 )
   * jstl

2. åœ¨application.propertiesä¸­é…ç½®è§†å›¾è§£æå™¨

   ```properties
   #ç›´æ¥å†™/é…ç½®çš„æ˜¯webappæ–‡ä»¶å¤¹ä¸‹
   spring.mvc.view.prefix=/
   #é…ç½®åç¼€ä¸º.jsp
   spring.mvc.view.suffix=.jsp
   ```

3. åœ¨src/mainä¸‹æ–°å»ºwebappç›®å½•ç”¨äºæ”¾jspæ–‡ä»¶

4. ä½¿ç”¨controllerç±»æ¥è¿”å›jspé¡µé¢

5. å¦‚æœæ˜¯åœ¨ideaä¸­è¿›è¡Œå¼€å‘, é‚£ä¹ˆä¼šå‡ºç°404çš„é”™è¯¯, å› ä¸ºç¼–è¯‘çš„åjspæ–‡ä»¶æ‰¾ä¸åˆ°, åœ¨pomé…ç½®æ–‡ä»¶ä¸­é…ç½®ç¼–è¯‘çš„è·¯å¾„

   ```xml
   <build>
       <!--æ”¾åœ¨buildä¸­-->
       <resources>
           <resource>
           	<directory>src/main/java</directory>
               <includes>
               	<include>**/*.xml</include>
               </includes>
           </resource>
           <resource>
               <directory>src/main/resources</directory>
               <includes>
               	<include>**/*.*</include>
               </includes>
           </resource>
           <resource>
               <!--æŠŠwebappç¼–è¯‘åˆ°meta-infä¸‹-->
           	<directory>src/main/webapp</directory>
               <targetPath>META-INF/resources</targetPath>
               <includes>
               	<include>**/*.*</include>
               </includes>
           </resource>
       </resources>
   </build>
   ```






### åœ¨springbootä¸­ä½¿ç”¨mybatis

1. åœ¨pomä¸­æ·»åŠ ä¾èµ–

   * mybatis-spring-boot-starter ( 1.3.1 )
   * mysql-connector-java
   * spring-boot-starter-web ( webç¨‹åºèµ·æ­¥ä¾èµ– )

2. åœ¨javaçš„æœ€åº•è·¯å¾„ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹mapperç”¨äºæ”¾mybatisçš„mapperé…ç½®æ–‡ä»¶

3. åœ¨application.propertiesé…ç½®æ–‡ä»¶ä¸­é…ç½®mapperé…ç½®æ–‡ä»¶çš„æ‰€åœ¨ä½ç½®  å’Œ æ•°æ®æºå‚æ•°

   ```properties
   #ç”±äºä¸Šä¸€æ­¥å°†mapperæ”¾åœ¨äº†ç±»è·¯å¾„ä¸‹, æ‰€ä»¥ä½¿ç”¨classpath
   #å…·ä½“è·¯å¾„æ ¹æ®å®é™…æƒ…å†µæ¥å†™
   #ä½¿ç”¨*.xmlé€šé…æ‰€æœ‰xmlæ–‡ä»¶
   mybatis.mapper-locations=classpath:com/itheima/springboot/mapper/*.xml
   
   #é…ç½®æ•°æ®æº
   spring.datasource.username=root
   spring.datasource.password=123456
   spring.datasource.driver-class-name=com.mysql.jdbc.Driver
   spring.datasource.url=jdbc:mysql://localhost:3306/æ•°æ®åº“å
   
   ```

4. æ–°å»ºæ•°æ®è¡¨ å’Œ å¯¹åº”å®ä½“ç±» å’Œ daoå±‚æ¥å£ å’Œ æ¥å£é…ç½®æ–‡ä»¶

   * è¿™ä¸€æ­¥å¯ä»¥ä½¿ç”¨mybatis-generator-maven-pluginæ’ä»¶è‡ªåŠ¨ç”Ÿæˆ
     1. åœ¨pomçš„æ’ä»¶ä¸­æ·»åŠ ä¸Šè¿°æ’ä»¶
     2. ç¼–è¾‘è¯¥æ’ä»¶ä½¿ç”¨çš„xmlé…ç½®æ–‡ä»¶
     3. åœ¨æ’ä»¶é…ç½®ä¸­æŒ‡å®šè¦ä½¿ç”¨çš„xmlæ–‡ä»¶
     4. åœ¨å³ä¾§mavenå·¥å…·æ ä¸­, æ‰¾åˆ°è¯¥æ’ä»¶, åŒå‡»è¿è¡Œ, å³å¯è‡ªåŠ¨ç”Ÿæˆä»£ç 

5. åœ¨daoå±‚æ¥å£ç±»ä¸Šæ·»åŠ  `@Mapper`  ä½¿å…¶è¢«å®¹å™¨åŠ è½½, æ•ˆæœåŒ `@Component`  ,  æˆ–è€…ä¸åŠ è¿™ä¸ªæ³¨è§£, åœ¨è¿è¡Œçš„ä¸»ç±»ä¸Šæ·»åŠ  `@MapperScan(basePackages="com.itheima.springboot.mapper")`  æ¥æ‰«æmapperç±»ä½¿å…¶åŠ å…¥å®¹å™¨, è·¯å¾„æ ¹æ®å®é™…æ¥å†™

6. å†™ä¸€å¥—controllerå’Œserviceæ¥å£å’Œserviceå®ç°ç±»æ¥è°ƒç”¨daoå±‚æ–¹æ³• ( ä½¿ç”¨è‡ªåŠ¨æ³¨å…¥å¯¹è±¡ )

7. è¿è¡Œmainå‡½æ•°å¼€å¯æœåŠ¡, è®¿é—®æµ‹è¯•

8. å¦‚æœæŠ¥é”™æœªæ‰¾åˆ°daoå±‚æ¥å£ çš„é…ç½®æ–‡ä»¶ , æŸ¥çœ‹targetç¼–è¯‘è·¯å¾„ä¸­æ˜¯å¦æœ‰mapperçš„é…ç½®æ–‡ä»¶, å¦‚æœæ²¡æœ‰, ä½¿ç”¨ä¸Šè¿°è§£å†³jspé¡µé¢æœªæ‰¾åˆ°çš„å¤„ç†æ–¹æ³•: pomä¸­çš„resourceé…ç½®ç¼–è¯‘è·¯å¾„



> www.haojson.com jsonæ ¼å¼åŒ–çš„ç½‘ç«™



### springbootä¸­ä½¿ç”¨äº‹åŠ¡ ( springçš„äº‹åŠ¡ )

1. åœ¨è¿è¡Œçš„ä¸»ç±»ä¸ŠåŠ æ³¨è§£ `@EnableTransactionManagement`
2. åœ¨serviceå®ç°ç±»çš„æ–¹æ³•ä¸ŠåŠ  `@Transactional` æŒ‡å®šè¯¥æ–¹æ³•ä½¿ç”¨äº‹åŠ¡



### springbootä¸­ä½¿ç”¨restfulé£æ ¼çš„è¯·æ±‚åœ°å€

1. åœ¨requestmappingä¸­æ·»åŠ å‚æ•°çš„æ˜ å°„, ç„¶ååœ¨å¤„ç†æ–¹æ³•çš„å‚æ•°ä¸Šä½¿ç”¨PathVariableæ¥ç»‘å®šå‚æ•°

   ```java
   //è¿™æ˜¯ä¸€ä¸ªcontroller
   
   //åœ°å€ä¸­æ·»åŠ å‚æ•°çš„æ˜ å°„
   @RequestMapping("boot/user/{id}")
   //å‚æ•°ä½¿ç”¨åœ°å€ä¸­çš„å‚æ•°æ˜ å°„
   public Object user (@PathVariable("id")int id){
   	//è¿™ä¸ªidå°±æ˜¯è¯·æ±‚åœ°å€ä¸­çš„å‚æ•°id
   }
   ```



### springbootçƒ­éƒ¨ç½² ( ä¿®æ”¹ä»£ç è‡ªåŠ¨é‡æ–°åŠ è½½ )

1. åœ¨pomä¸­æ·»åŠ ä¾èµ–

   ```xml
   <dependency>
   	<groupId>org.springframework.boot</groupId>
       <artifactId>spring-boot-devtools</artifactId>
       <optional>true</optional>
   </dependency>
   ```

2. é‡å¯é¡¹ç›®

3. å¦‚æœä½¿ç”¨eclipseå¼€å‘, ä¿®æ”¹ä»£ç åä¼šè‡ªåŠ¨é‡æ–°åŠ è½½, å¦‚æœä½¿ç”¨ideaå¼€å‘, ä¿®æ”¹ä»£ç å, éœ€è¦ç‚¹å‡»å·¥å…·æ build->build module <å½“å‰é¡¹ç›®å> æ‰ä¼šé‡æ–°åŠ è½½

4. è¯¥æ’ä»¶å¯èƒ½å¶å°”ä¼šå‡ºç°é‡æ–°åŠ è½½åè¿˜æ˜¯è€ä»£ç çš„é—®é¢˜, æ‰‹åŠ¨é‡å¯é¡¹ç›®



### åœ¨springbootä¸­ä½¿ç”¨redis

1. å¼•å…¥ä¾èµ–

   ```xml
   <dependency>
   	<groupId>org.springframework.boot</groupId>
       <artifactId>sping-boot-starter-data-redis</artifactId>
   </dependency>
   ```

2. åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®è¿æ¥redisæœåŠ¡å™¨çš„å‚æ•°

   ```properties
   spring.redis.host=192.168.230.128
   spring.redis.port=6379
   spring.redis.password=123456
   ```

3. æ­¤æ—¶å¯åŠ¨ç¨‹åº, å®¹å™¨ä¸­å°†ä¼šåŠ è½½ä¸€ä¸ª redisTemplate å¯¹è±¡

4. åœ¨è¦ä½¿ç”¨redisTemplateçš„åœ°æ–¹ä½¿ç”¨è‡ªåŠ¨æ³¨å…¥  

   ```java
   //ä½¿ç”¨å®¹å™¨ ä¸­çš„è¿™ä¸ªå¯¹è±¡, åªæœ‰è¿™ä¸¤ç§æ³›å‹å¯ä»¥ä½¿ç”¨
   
   @Autowired
   private RedisTemplate<String , String> redisTemplate;
   @Autowired
   private RedisTemplate<Object , Object> redisTemplate1;
   ```

* å¯¹äºé«˜å¹¶å‘,å¯èƒ½å‡ºç°ç¼“å­˜ç©¿é€é—®é¢˜, åœ¨serviceå±‚ä½¿ç”¨synchronizedæ¥è§£å†³

* å¯¹äºé«˜å¹¶å‘çš„æµ‹è¯•, ä½¿ç”¨ Executors åˆ›å»ºçº¿ç¨‹æ± æ¥æµ‹è¯•

  ```java
  //æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ± 25ä¸ªçº¿ç¨‹, ä¸ªæ•°æ ¹æ®cupæ•°æ¥å®š, 4æ ¸å°±8ä¸ª, 16æ ¸å°±32ä¸ª
  ExecutorService executorService = Executors.newFixedThreadPool("25");
  //åˆ›å»º10000ä¸ªçº¿ç¨‹å¹¶æ‰§è¡Œ
  for(int i=0;i<10000;i++){
      executorService.submit(new Runnale(){
          @Override
          public void run(){
              //æ¯ä¸ªçº¿ç¨‹åšä»€ä¹ˆ...
          }
      })
  }
  ```

  

> é¡¹ç›®ä¸­çš„å®ä½“ç±»éƒ½åº”å½“å®ç°åºåˆ—åŒ–æ¥å£ Serializable



> synchronized åŒæ­¥ ( å³çº¿ç¨‹æ’é˜Ÿæ‰§è¡Œ ), å¯ç”¨åœ¨æ–¹æ³•ä¸Š, å¯ç”¨åœ¨ä»£ç å—ä¸Š





### springbootä½¿ç”¨springmvcä¸­çš„æ‹¦æˆªå™¨

1. åˆ›å»ºæ‹¦æˆªå™¨ç±»å®ç°HandlerInterceptoræ¥å£

   ```java
   class LoginInterceptor implements HandlderInterceptor{
       @Override
       public boolean preHandler(
           HttpServletRequest request, HttpServletResponse response)
       {
           //é¢„å¤„ç†æ–¹æ³•
           return true;
       }
       
       @Override
       public void postHandler(
           HttpServletRequest request, HttpServletResponse response)
       {
       	
       }
       
       @Override
       public void afterCompletion(
       	HttpServletRequest request, HttpServletResponse response)
       {
       	
       }
   }
   ```

2. æ–°å»ºé…ç½®ç±»ç»§æ‰¿WebMvcConfigurerAdapter

   ```java
   //ä½¿ç”¨æ³¨è§£ä½¿è¿™ä¸ªç±»æˆ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ”¾åœ¨ src/main/resources/static ä¸‹

    

### ä½¿ç”¨actuatorç›‘æ§æœåŠ¡çŠ¶æ€

* actuatorä½¿ç”¨ä¸€ä¸ªç«¯å£å¼€å¯ä¸€ä¸ªç›‘æ§æœåŠ¡, é€šè¿‡urlè®¿é—®è¯¥åœ°å€è·å–çŠ¶æ€ä¿¡æ¯

1. åœ¨pomä¸­å¼•å…¥ä¾èµ–
   
* spring-boot-starter-actuator 
  
2. åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®actuatorç›‘æ§ç«¯å£å’Œé¡¹ç›®åŠæ¥å£

   ```properties
   #è®¾ç½®ç›‘æ§æœåŠ¡ä½¿ç”¨å“ªä¸ªç«¯å£, å¦‚æœä¸æŒ‡å®šç«¯å£, é»˜è®¤ä½¿ç”¨æœåŠ¡çš„ç«¯å£
   management.server.port=8080
   #è®¾ç½®ç›‘æ§æœåŠ¡å¼€å¯ç«¯å£çš„ä¸Šä¸‹æ–‡, åœ¨è®¿é—®ç›‘æ§æœåŠ¡æ—¶, è¦ä½¿ç”¨è¿™ä¸ªä½œä¸ºé¡¹ç›®å
   management.server.servlet.context-path=/03-springboot-web
   #é»˜è®¤åªå¼€å¯healthå’Œinfoçš„ç›‘æ§, è®¾ç½®ä¸º*æ¥ç›‘æ§æ‰€æœ‰çš„webå…¥å£ç«¯ç‚¹
   management.endpoints.web.exposure.include=*
   ```

3. å¯åŠ¨mainæ–¹æ³•, æ§åˆ¶å°æ˜¾ç¤ºå¼€å¯äº†ä¸¤ä¸ªæœåŠ¡, ä¸€ä¸ªæ˜¯tomcatæœåŠ¡, ä¸€ä¸ªæ˜¯ç›‘æ§æœåŠ¡

4. åœ¨æµè§ˆå™¨ä½¿ç”¨ç›‘æ§æœåŠ¡çš„ç«¯å£å’Œä¸Šä¸‹æ–‡æ¥è®¿é—®ç›‘æ§æœåŠ¡æä¾›çš„çŠ¶æ€ä¿¡æ¯ ( ä¸Šä¸‹æ–‡å’ŒçŠ¶æ€ä¹‹é—´æ·»åŠ actuator )

   * é»˜è®¤å¼€å¯çš„ä¸¤ä¸ªä¿¡æ¯ç«¯å£

     `localhost:8100/03-springboot-web/actuator/health`

     `localhost:8100/03-springboot-web/actuator/info`





### springbootä½¿ç”¨dubbo

* æœ€ä½³å®è·µ: ä¸€ä¸ªå…¬å…±çš„æœåŠ¡æ¥å£é¡¹ç›®( æ”¾æœåŠ¡çš„æ¥å£å’Œå®ä½“ç±» ), ä¸€ä¸ªæœåŠ¡çš„æä¾›è€…é¡¹ç›® ,ä¸€ä¸ªæœåŠ¡çš„æ¶ˆè´¹è€…é¡¹ç›® 
* å¦‚æœå…¶ä»–é¡¹ç›®å¼•ç”¨æœ¬åœ°çš„å…¬å…±é¡¹ç›®å¼•ç”¨ä¸åˆ° , é‚£ä¹ˆè¿›å…¥æœ¬åœ°ä»“åº“ , è¿›å…¥å…¬å…±é¡¹ç›®çš„ç‰ˆæœ¬ç›®å½•ä¸­ , åˆ é™¤ _remote.repositories æ–‡ä»¶ ,é‡å¯ideaé‡æ–°å¼•å…¥ 
* å°½é‡ä½¿ç”¨è‡ªå·±å®‰è£…çš„maven , ä¸è¦ä½¿ç”¨ideaè‡ªå¸¦çš„maven

##### ----åˆ›å»ºå…¬å…±çš„æ¥å£é¡¹ç›®
1. åˆ›å»ºä¸€ä¸ªmavené¡¹ç›®, ä½œä¸ºå…¬å…±æ¥å£é¡¹ç›®, åœ¨å…¶ä¸­æ·»åŠ serviceå±‚å’Œmodelå±‚, æ·»åŠ serviceæ¥å£å’Œmodelå®ä½“ç±», åœ¨maven projectä¸­ä½¿ç”¨installåœ¨æœ¬åœ°mavenä»“åº“ç”Ÿæˆæ‰“åŒ…åçš„jaråŒ…

##### ----åˆ›å»ºæä¾›è€…é¡¹ç›®
1. åˆ›å»ºä¸€ä¸ªå¸¦webåŠŸèƒ½çš„springbooté¡¹ç›®, ä½œä¸ºæœåŠ¡æä¾›è€…
2. åŠ å…¥dubboèµ·æ­¥ä¾èµ–, å’Œzookeeperå®¢æˆ·ç«¯çš„ä¾èµ–åŒ…
```xml
<!--dubbo-->
<dependency>
    <groupId>com.alibaba.spring.boot</groupId>
    <artifactId>dubbo-spring-boot-starter</artifactId>
    <version>1.0.0</version>
</dependency>
<!--zookeeper-->
<denpendency>
    <groupId>com.101tec</groupId>
    <artifactId>zkclient</artifactId>
    <version>0.10</version>
</denpendency>
```
3. åœ¨springbooté…ç½®æ–‡ä»¶ä¸­é…ç½®dubbo

   ```properties
   #å†…ç½®çš„tomcatæœåŠ¡ç«¯å£
   server.port=8080
   #dubboé…ç½®
   spring.dubbo.appname=springboot-dubbo-provider
   spring.dubbo.registry=zookeeper://192.168.230.128:2181
   ```

4. åœ¨æä¾›è€…çš„pomæ–‡ä»¶ä¸­å¼•å…¥å…¬å…±çš„æ¥å£é¡¹ç›®çš„jaråŒ…, é€šè¿‡åœ¨æ¥å£é¡¹ç›®ä¸­å®šä¹‰çš„groupid, artifactid ,versionæ¥å¼•å…¥

   ```xml
   <dependency>
       <!--å¤åˆ¶æ¥å£é¡¹ç›®pomæ–‡ä»¶ä¸­çš„ç»„id , é¡¹ç›®id, ç‰ˆæœ¬å·ä¿¡æ¯è¿‡æ¥-->
   </dependency>
   ```

5. å†™æ¥å£çš„å®ç°ç±»

   ```java
   //dubboå®¶çš„æ³¨è§£
   @Service
   //springå®¶çš„æ³¨è§£
   @Component
   public class UserServiceImpl implements UserService{
       @Override
       public String sya(String name){
           return "hello " + name;
       }
   }
   ```

6. åœ¨mainæ–¹æ³•çš„ç±»ä¸Šæ·»åŠ  `@EnableDubboConfiguration` å¼€å¯dubboæ³¨è§£

7. å¯åŠ¨zookeeperæ³¨å†Œä¸­å¿ƒæœåŠ¡

8. å¯åŠ¨mainæ–¹æ³•æ¥æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ

##### ----åˆ›å»ºæ¶ˆè´¹è€…é¡¹ç›®

1. åˆ›å»ºä¸€ä¸ªå¸¦webçš„springbooté¡¹ç›®

2. åœ¨pomä¸­æ·»åŠ dubboèµ·æ­¥ä¾èµ– & zookeeperå®¢æˆ·ç«¯ä¾èµ–åŒ…

3. åœ¨springbooté…ç½®æ–‡ä»¶ä¸­é…ç½®dubbo

   ```properties
   server.port=9090
   #dubboé…ç½®
   spring.dubbo.appname=spring-boot-consumer
   spring.dubbo.registry=zookeeper://192.168.91.29:2181
   ```

4. åœ¨pomä¸­æ·»åŠ å…¬å…±æ¥å£é¡¹ç›®çš„ä¾èµ–jar

5. ç¼–å†™controlleræ¥è¿œç¨‹è°ƒç”¨æä¾›è€…çš„æ–¹æ³•

   ```java
   @Controller
   public class helloCOntroller{
       @Reference //dubboå®¶çš„æ³¨è§£, è‡ªåŠ¨æ³¨å…¥è¿œæ–¹çš„æä¾›è€…å®ä¾‹, å¦‚æœæä¾›è€…ä¸­è®¾ç½®äº†ç‰ˆæœ¬å·, é‚£ä¹ˆåœ¨è¿™é‡Œå°±è¦è®¾ç½®ç›¸åº”çš„ç‰ˆæœ¬å·
       UserService userService;
       //ç›´æ¥ä½¿ç”¨serviceå¯¹è±¡å³å¯
       @ResponseBody
       @RequestMapping("hi")
       public String sya(String mess){
           return userService.sya()+mess;
       }
   }
   ```

6. åœ¨mainæ–¹æ³•çš„ç±»ä¸Šæ·»åŠ  `@EnableDubboConfiguration` å¼€å¯dubboæ³¨è§£

7. è¿è¡Œmainæ–¹æ³•å¯åŠ¨æ¶ˆè´¹è€…, ä½¿ç”¨æµè§ˆå™¨è®¿é—®æ¥å£æµ‹è¯•è¿œç¨‹è°ƒç”¨ç»“æœ







### springboot + dubbo + mybatis + redis + thymeleafæ¡ˆä¾‹

1. åˆ›å»ºé¡¹ç›®
    * dubboæ¥å£é¡¹ç›® , ä¸ºæ™®é€šçš„mavené¡¹ç›®
    * dubboæä¾›è€…é¡¹ç›®, å¼•å…¥dubboæ¥å£é¡¹ç›® , ä¸ºå¸¦webåŠŸèƒ½çš„springbooté¡¹ç›®
    * dubboæ¶ˆè´¹è€…é¡¹ç›® , springbooté¡¹ç›®, å¸¦webåŠŸèƒ½
2. å‡†å¤‡æ•°æ®åº“ , å‡†å¤‡è¡¨ user
3. åœ¨dubboæä¾›è€…ä¸­å‡†å¤‡mybatisæ¥å£ç±» , å¯ä½¿ç”¨æ’ä»¶ç”Ÿæˆ , åŒæ—¶åœ¨æä¾›è€…ä¸­é…ç½®myabtisç¯å¢ƒä¿è¯å¯è®¿é—®æ•°æ®åº“
4. åœ¨dubboæ¥å£é¡¹ç›®ä¸­å‡†å¤‡å®ä½“ç±»(å®ä½“ç±»éœ€è¦å®ç°å¯åºåˆ—åŒ–) å’Œ serviceæ¥å£å±‚
5. åœ¨dubboæä¾›è€…ä¸­æ·»åŠ serviceå®ç°å±‚ , æä¾›è€…å¼•ç”¨äº†æ¥å£é¡¹ç›® , éœ€è¦å…ˆæŠŠ æ¥å£é¡¹ç›® install åˆ°mavenæœ¬åœ°ä»“åº“ , ç„¶ååœ¨ æä¾›è€…çš„pomæ–‡ä»¶ä¸­æ·»åŠ  æ¥å£é¡¹ç›®ä¸ºä¾èµ–
6. æä¾›è€…ä¸­çš„ serviceå®ç°ç±»å®ç°serviceæ¥å£ , å…¶ä¸­é€šè¿‡è°ƒç”¨daoå±‚æ¥å£æ¥è®¿é—®æ•°æ®åº“ , è¯¥å®ç°ç±»åº”å½“ä½¿ç”¨ Componentå’Œdubboçš„service æ³¨è§£
7. é€šè¿‡é…ç½®å°†æä¾›è€…å’Œæ¶ˆè´¹è€…åŠ å…¥åˆ°dubboçš„æ³¨å†Œä¸­å¿ƒ
8. åœ¨ è™šæ‹Ÿæœºä¸­å¯åŠ¨zookeeper
9. å¯åŠ¨æä¾›è€…æœåŠ¡
10. é…ç½®æ¶ˆè´¹è€…é¡¹ç›®çš„ dubboç›¸å…³è®¾ç½®, ä½¿å…¶å¯æ­£å¸¸è®¿é—®æä¾›è€…çš„æœåŠ¡ 
11. é…ç½®æ¶ˆè´¹è€…çš„springmvcç¯å¢ƒ , ä½¿å¾—å¯é€šè¿‡é¡µé¢è¿›è¡Œè®¿é—®æ¶ˆè´¹è€…æœåŠ¡
12. å†™å‰ç«¯çš„thymeleafé¡µé¢ , åœ¨å…¶ä¸­è°ƒç”¨æ¶ˆè´¹è€…ä»æä¾›è€…è·å–çš„æœåŠ¡
13. å¯åŠ¨æ¶ˆè´¹è€…é¡¹ç›®é€šè¿‡é¡µé¢æµ‹è¯•dubboè°ƒç”¨æƒ…å†µ
14. å‡†å¤‡redis
15. åœ¨æä¾›è€…ä¸­è¿æ¥rediså¹¶æµ‹è¯•
16. å°† ä¼˜å…ˆä½¿ç”¨redisçš„é€»è¾‘ æ·»åŠ åˆ°æä¾›è€…serviceå®ç°ç±»é€»è¾‘ä¸­
17. å¯åŠ¨æ¶ˆè´¹è€…å’Œæä¾›è€…æµ‹è¯•æ•´ä¸ªç³»ç»Ÿ